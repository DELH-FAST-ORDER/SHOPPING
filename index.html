<!DOCTYPE html >

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Delh Fast - Customer</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
<style>
    body { font-family: Arial; background-color: #f4f4f4; padding-bottom: 80px; }
    .container { margin-top: 20px; }
    .product-card {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      margin: 10px 0;
      background: #fff;
    }
    #cartSection {
      position: fixed;
      top: 60px;
      right: 10px;
      width: 320px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 10px;
      z-index: 999;
      display: none;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .cart-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .cart-item select {
      width: 60px;
    }
  </style>
</head>
<body>
<div class="container" id="loginSection">
<h2 class="text-center">Delh Fast - Login</h2>
<input class="form-control my-2" id="custName" placeholder="Your Name" required="" type="text"/>
<input class="form-control my-2" id="custMobile" maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 10);" placeholder="Mobile Number" required="" type="number"/>
<select class="form-control my-2" id="custState"><option value="">Select State</option><option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option><option value="Andhra Pradesh">Andhra Pradesh</option><option value="Arunachal Pradesh">Arunachal Pradesh</option><option value="Assam">Assam</option><option value="Bihar">Bihar</option><option value="Chandigarh">Chandigarh</option><option value="Chhattisgarh">Chhattisgarh</option><option value="Dadra and Nagar Haveli and Daman and Diu">Dadra and Nagar Haveli and Daman and Diu</option><option value="Delhi">Delhi</option><option value="Goa">Goa</option><option value="Gujarat">Gujarat</option><option value="Haryana">Haryana</option><option value="Himachal Pradesh">Himachal Pradesh</option><option value="Jammu and Kashmir">Jammu and Kashmir</option><option value="Jharkhand">Jharkhand</option><option value="Karnataka">Karnataka</option><option value="Kerala">Kerala</option><option value="Ladakh">Ladakh</option><option value="Lakshadweep">Lakshadweep</option><option value="Madhya Pradesh">Madhya Pradesh</option><option value="Maharashtra">Maharashtra</option><option value="Manipur">Manipur</option><option value="Meghalaya">Meghalaya</option><option value="Mizoram">Mizoram</option><option value="Nagaland">Nagaland</option><option value="Odisha">Odisha</option><option value="Puducherry">Puducherry</option><option value="Punjab">Punjab</option><option value="Rajasthan">Rajasthan</option><option value="Sikkim">Sikkim</option><option value="Tamil Nadu">Tamil Nadu</option><option value="Telangana">Telangana</option><option value="Tripura">Tripura</option><option value="Uttar Pradesh">Uttar Pradesh</option><option value="Uttarakhand">Uttarakhand</option><option value="West Bengal">West Bengal</option></select>
<select class="form-control my-2" id="custDistrict">
<option value="" >Select district </option>
</select>
<input class="form-control my-2" id="custCity" placeholder="Enter City" type="text"/>
<input class="form-control my-2" id="custPincode" maxlength="6" oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 6);" placeholder="Enter Pincode" type="number"/>
<input class="form-control my-2" id="custStreet" placeholder="Street / Landmark" required="" type="text"/>
<button class="btn btn-primary w-100 my-2" onclick="login()">Login</button>
</div>
<!-- Grocery Section -->
<div class="position-fixed bottom-0 end-0 m-4">
<div class="dropdown dropup">
<ul class="dropdown-menu dropdown-menu-end">
<li><a class="dropdown-item" href="#" onclick="secureReset()">Reset</a></li>
<li><a class="dropdown-item" href="#" onclick="secureOrder()">Order</a></li>
<li><a class="dropdown-item" href="add_product.html">Sell</a></li>
</ul>
</div>
</div>
<div class="container d-none" id="grocerySection">
<!-- Top bar with dynamic pincode and address button -->
<div class="d-flex justify-content-between align-items-center bg-white p-2 shadow-sm">
<span class="fw-bold" id="userPincode">Pincode</span>

</div>
<!-- Search Bar -->
<div class="input-group my-2">
<span class="input-group-text"><i class="bi bi-search"></i></span>
<input class="form-control" id="searchInput" oninput="searchProducts()" placeholder="Search Products" type="text"/>
</div>
<!-- Title and Cart Button -->
<div class="d-flex justify-content-between align-items-center mb-2">
<h2 class="text-center flex-grow-1">SHOP NOW</h2>

</div>
<!-- Product Grid -->
<div class="row" id="productContainer"></div>
</div>
<!-- Cart Section -->
<div class="position-fixed top-0 start-0 w-100 h-100 bg-white d-none" id="fullCartOverlay" style="z-index: 1050; overflow-y: auto;">
<div class="p-3">
<h4 class="fw-bold mb-2">CART</h4>
<p>Delivered to: <span id="cartUserAddress"></span> <a href="#" onclick="openChangeAddressOverlay()">Change</a></p>
<div id="fullCartItems"></div>
<!-- Price Details -->
<div class="mt-4 border-top pt-3">
<h5>PRICE DETAILS</h5>
<p>Price (Qty x ₹): <span id="cartPrice"></span></p>
<p>Discount: <span id="cartDiscount"></span></p>
<p>Delivery Charge: <span id="cartDelivery"></span></p>
<p>Protection Fee: <span id="cartProtection">₹5</span></p>
<hr/>
<h5>Total Amount: ₹<span id="cartTotal"></span></h5>
<button class="btn btn-primary w-100 mt-3" onclick="submitCart()">ORDER NOW – ₹<span id="cartOrderNow"></span></button>
</div>
<button class="btn btn-secondary mt-4 w-100" onclick="closeFullCart()">Close</button>
</div>
</div>
&lt;
<!-- Seller Code Section -->
<div class="container d-none" id="sellerCodeSection">
<h2 class="text-center">Enter Seller Code &amp; Password</h2>
<input class="form-control my-2" id="sellerCodeInput" placeholder="Enter Seller Code" type="text"/>
<input class="form-control my-2" id="sellerPassInput" placeholder="Enter Seller Password" type="password"/>
<button class="btn btn-success w-100 my-2" onclick="validateSellerAccess()">Submit</button>
<div class="text-center mt-3">
<button class="btn btn-link p-0" onclick="alert('To get a Seller Code, please contact support@delhfast.com')">Don't have a Seller Code?</button><br/>
<button class="btn btn-link p-0" onclick="alert('To get your Seller Password, please contact support@delhfast.com')">Don't have a Seller Password?</button>
</div>
</div>
<!-- Seller Login Section -->
<div class="container d-none" id="sellerLoginSection">
<h2 class="text-center">Seller Login</h2>
<input class="form-control my-2" id="sellerName" placeholder="Your Name" required="" type="text"/>
<input class="form-control my-2" id="sellerPassword" placeholder="Password" required="" type="password"/>
<input class="form-control my-2" id="shopName" placeholder="Shop Name" required="" type="text"/>
<input class="form-control my-2" id="shopAddress" placeholder="Shop Address" required="" type="text"/>
<button class="btn btn-success w-100 my-2" onclick="sellerLogin()">Login</button>
</div>
<!-- Add Product Section -->
<div class="container d-none" id="addProductSection">
<h2 class="text-center">Add Products for Shopping</h2>
<input class="form-control my-2" id="productName" placeholder="Product Name" required="" type="text"/>
<input class="form-control my-2" id="productPrice" placeholder="Product Price (₹)" required="" type="number"/>
<textarea class="form-control my-2" id="productDesc" placeholder="Product Description" required=""></textarea>
<input accept="image/*" class="form-control my-2" id="productImage" type="file"/>
<button class="btn btn-success w-100 my-2" onclick="addProduct()">Add Product</button>
<div class="product-list mt-4" id="productList">
<h3>Added Products</h3>
</div>
</div>
<!-- Bottom Bar -->
<div class="position-fixed bottom-0 start-0 end-0 bg-light border-top d-flex justify-content-around align-items-center py-2 shadow">
<button class="btn btn-light d-flex flex-column align-items-center" onclick="window.location.reload()">
<i class="bi bi-house-door fs-4"></i><small>Home</small>
</button>
<button class="btn btn-light d-flex flex-column align-items-center" onclick= "openAccount()">
<i class="bi bi-person fs-4"></i><small>Account</small>
</button>
<button class="btn btn-light d-flex flex-column align-items-center" onclick="openSettings()">
<i class="bi bi-gear fs-4"></i><small>Settings</small>
</button>
<button class="btn btn-light d-flex flex-column align-items-center" onclick="toggleCart()">
<i class="bi bi-cart fs-4"></i><small>Cart</small>
</button>
</div>
<!-- Overlay for Account Info -->
<div class="position-fixed top-0 start-0 w-100 h-100 bg-white d-none" id="accountOverlay" style="z-index: 1050; overflow-y: auto;">
  <div class="p-3">
    <h4 class="text-center fw-bold mb-4">ACCOUNT – <span id="accountUserName">User</span></h4>

    <div class="d-flex justify-content-around mb-3">
      <button class="btn btn-outline-primary w-45" onclick="viewOrders()"># Orders</button>
      <button class="btn btn-outline-secondary w-45" onclick="openRedeem()">₹ Redeem</button>
    </div>

    <h5 class="mt-4">Account Settings</h5>
    <ul class="list-unstyled">
      <li><a >+ Plus Member</a></li>
      <li><a onclick="editAccount()">+ Edit Profile</a></li>
      <li><a >+ Saved Address</a></li>
      <li><a  onclick="logout()">+ Logout</a></li>
    </ul>

    <h5 class="mt-4">Earn</h5>
    <ul class="list-unstyled">
      <li><a onclick="handleSell()">+ Sell</a></li>
      <li><a >+ Work with us</a></li>
    </ul>

    <h5 class="mt-4">Saved</h5>
    <ul class="list-unstyled">
      <li>+ Saved Products</li>
      <li>+ Saved Addresses</li>
    </ul>

    <h5 class="mt-4">DELH-POINTS</h5>
    <p><strong id="delhPoints">0 points</strong></p>

    <button class="btn btn-secondary mt-4 w-100" onclick="closeAccountOverlay()">Close</button>
  </div>
</div>
<!-- Overlay for Orders -->
<div class="position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-75 d-flex justify-content-center align-items-center d-none" id="ordersOverlay" style="z-index: 1050; overflow-y: auto;">
<div class="bg-white rounded p-4 text-start shadow" style="max-width: 500px; width: 90%;">
<h5 class="mb-3 text-center">Past Orders</h5>
<div id="ordersList"></div>
<button class="btn btn-secondary mt-3 w-100" onclick="closeOrdersOverlay()">Close</button>
</div>
</div>
<!-- Overlay for Settings -->
<div class="position-fixed top-0 start-0 w-100 h-100 bg-white d-none" id="settingsOverlay" style="z-index: 1050; overflow-y: auto;">
<div class="p-3">
<h4 class="text-center fw-bold mb-4">SETTINGS</h4>
<h5>User Settings</h5>
<ul class="list-unstyled">
<li><a  onclick="deleteAccount()">+ Delete Account</a></li>
<li><a onclick="changeMobile()">+ Change Mobile No.</a></li>
</ul>
<h5>App Settings</h5>
<ul class="list-unstyled" id="appSettingsList">
  <li><a onclick="promptAppEdit()">+ APP-EDIT</a></li>
</ul>
<h5>Help &amp; Support</h5>
<ul class="list-unstyled">
<li>+ Plus Member</li>
<li>+ Upcoming Features</li>
<li>+ Delh-Points</li>
</ul>
<button class="btn btn-secondary mt-4 w-100" onclick="closeSettingsOverlay()">Close</button>
</div>
</div>
<script>
function openAccount() {
  const customer = JSON.parse(localStorage.getItem('delhFastCustomer') || '{}');
  document.getElementById("accountUserName").textContent = customer.name || "User";
  document.getElementById("accountOverlay").classList.remove("d-none");
}

function closeAccountOverlay() {
  document.getElementById('accountOverlay').classList.add('d-none');
}

function editAccount() {
  const customer = JSON.parse(localStorage.getItem('delhFastCustomer') || '{}');
  document.getElementById('custName').value = customer.name || '';
  document.getElementById('custMobile').value = customer.mobile || '';

  if (customer.address) {
    const parts = customer.address.split(',').map(s => s.trim());
    document.getElementById('custStreet').value = parts[0] || '';
    document.getElementById('custCity').value = parts[1] || '';
    if (parts.length >= 4) {
      document.getElementById('custDistrict').value = parts[2] || '';
      const statePincode = parts[3].split('-').map(s => s.trim());
      document.getElementById('custState').value = statePincode[0] || '';
      document.getElementById('custPincode').value = statePincode[1] || '';
    }
  }

  document.getElementById('loginSection').classList.remove('d-none');
  document.getElementById('grocerySection').classList.add('d-none');
  closeAccountOverlay();
}

function logout() {
  if (confirm('Are you sure you want to logout?')) {
    localStorage.removeItem('delhFastCustomer');
    localStorage.removeItem('delhFastCart');
    window.location.reload();
  }
}

function viewOrders() {
  const orders = JSON.parse(localStorage.getItem('delhFastOrders') || '[]');
  const ordersList = document.getElementById('ordersList');
  ordersList.innerHTML = '';

  if (orders.length === 0) {
    ordersList.innerHTML = '<p class="text-muted text-center">No past orders found.</p>';
  } else {
    orders.forEach((order, index) => {
      const div = document.createElement('div');
      div.className = 'border rounded p-2 mb-3';
      div.innerHTML = `
        <p><strong>Order #${index + 1}</strong></p>
        <p><strong>Date:</strong> ${order.date} ${order.time}</p>
        <p><strong>Address:</strong> ${order.address}</p>
        <p><strong>Products:</strong></p>
        <ul>${order.products.map(p => `<li>${p.name} (Qty: ${p.quantity})</li>`).join('')}</ul>
      `;
      ordersList.appendChild(div);
    });
  }

  document.getElementById('ordersOverlay').classList.remove('d-none');
}

function closeOrdersOverlay() {
  document.getElementById('ordersOverlay').classList.add('d-none');
}

function openSettings() {
  document.getElementById('settingsOverlay').classList.remove('d-none');
}

function closeSettingsOverlay() {
  document.getElementById('settingsOverlay').classList.add('d-none');
}

function openChangeAddressOverlay() {
  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  if (customer.address) {
    document.getElementById("oldAddress").textContent = customer.address;
    document.getElementById("newAddress").value = customer.address;
    document.getElementById("changeAddressOverlay").classList.remove("d-none");

    // Load saved addresses
    const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
    const list = document.getElementById("savedAddressList");
    list.innerHTML = "";
    saved.forEach(addr => {
      const li = document.createElement("li");
      li.className = "list-group-item list-group-item-action";
      li.textContent = addr;
      li.onclick = () => {
        document.getElementById("newAddress").value = addr;
      };
      list.appendChild(li);
    });
  }
}

function saveNewAddress() {
  const newAddress = document.getElementById("newAddress").value.trim();
  if (!newAddress) {
    alert("Please enter a valid address.");
    return;
  }

  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");

  if (customer.address && customer.address !== newAddress && !saved.includes(customer.address)) {
    saved.push(customer.address);
    localStorage.setItem("delhFastSavedAddresses", JSON.stringify(saved));
  }

  customer.address = newAddress;
  localStorage.setItem("delhFastCustomer", JSON.stringify(customer));
  document.getElementById("cartUserAddress").textContent = newAddress;
  document.getElementById("userPincode").textContent = newAddress.split("-")?.[1]?.trim() || "Pincode";
  closeChangeAddressOverlay();
  alert("Address updated!");
}

function closeChangeAddressOverlay() {
  document.getElementById("changeAddressOverlay").classList.add("d-none");
}

function showSavedAddresses() {
  const list = document.getElementById("accountSavedAddresses");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
  if (saved.length === 0) {
    list.innerHTML = "<li class='text-muted small'>No saved addresses found.</li>";
  } else {
    list.innerHTML = saved.map(addr => `<li class='text-muted small'>${addr}</li>`).join("");
  }
}
</script>
<script><script>
function openAccount() {
  const customer = JSON.parse(localStorage.getItem('delhFastCustomer') || '{}');
  document.getElementById("accountUserName").textContent = customer.name || "User";
  document.getElementById("accountOverlay").classList.remove("d-none");
}

function closeAccountOverlay() {
  document.getElementById('accountOverlay').classList.add('d-none');
}

function editAccount() {
  const customer = JSON.parse(localStorage.getItem('delhFastCustomer') || '{}');
  document.getElementById('custName').value = customer.name || '';
  document.getElementById('custMobile').value = customer.mobile || '';

  if (customer.address) {
    const parts = customer.address.split(',').map(s => s.trim());
    document.getElementById('custStreet').value = parts[0] || '';
    document.getElementById('custCity').value = parts[1] || '';
    if (parts.length >= 4) {
      document.getElementById('custDistrict').value = parts[2] || '';
      const statePincode = parts[3].split('-').map(s => s.trim());
      document.getElementById('custState').value = statePincode[0] || '';
      document.getElementById('custPincode').value = statePincode[1] || '';
    }
  }

  document.getElementById('loginSection').classList.remove('d-none');
  document.getElementById('grocerySection').classList.add('d-none');
  closeAccountOverlay();
}

function logout() {
  if (confirm('Are you sure you want to logout?')) {
    localStorage.removeItem('delhFastCustomer');
    localStorage.removeItem('delhFastCart');
    window.location.reload();
  }
}

function viewOrders() {
  const orders = JSON.parse(localStorage.getItem('delhFastOrders') || '[]');
  const ordersList = document.getElementById('ordersList');
  ordersList.innerHTML = '';

  if (orders.length === 0) {
    ordersList.innerHTML = '<p class="text-muted text-center">No past orders found.</p>';
  } else {
    orders.forEach((order, index) => {
      const div = document.createElement('div');
      div.className = 'border rounded p-2 mb-3';
      div.innerHTML = `
        <p><strong>Order #${index + 1}</strong></p>
        <p><strong>Date:</strong> ${order.date} ${order.time}</p>
        <p><strong>Address:</strong> ${order.address}</p>
        <p><strong>Products:</strong></p>
        <ul>${order.products.map(p => `<li>${p.name} (Qty: ${p.quantity})</li>`).join('')}</ul>
      `;
      ordersList.appendChild(div);
    });
  }

  document.getElementById('ordersOverlay').classList.remove('d-none');
}

function closeOrdersOverlay() {
  document.getElementById('ordersOverlay').classList.add('d-none');
}

function openSettings() {
  document.getElementById('settingsOverlay').classList.remove('d-none');
}

function closeSettingsOverlay() {
  document.getElementById('settingsOverlay').classList.add('d-none');
}

function openChangeAddressOverlay() {
  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  if (customer.address) {
    document.getElementById("oldAddress").textContent = customer.address;
    document.getElementById("newAddress").value = customer.address;
    document.getElementById("changeAddressOverlay").classList.remove("d-none");

    // Load saved addresses
    const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
    const list = document.getElementById("savedAddressList");
    list.innerHTML = "";
    saved.forEach(addr => {
      const li = document.createElement("li");
      li.className = "list-group-item list-group-item-action";
      li.textContent = addr;
      li.onclick = () => {
        document.getElementById("newAddress").value = addr;
      };
      list.appendChild(li);
    });
  }
}

function saveNewAddress() {
  const newAddress = document.getElementById("newAddress").value.trim();
  if (!newAddress) {
    alert("Please enter a valid address.");
    return;
  }

  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");

  if (customer.address && customer.address !== newAddress && !saved.includes(customer.address)) {
    saved.push(customer.address);
    localStorage.setItem("delhFastSavedAddresses", JSON.stringify(saved));
  }

  customer.address = newAddress;
  localStorage.setItem("delhFastCustomer", JSON.stringify(customer));
  document.getElementById("cartUserAddress").textContent = newAddress;
  document.getElementById("userPincode").textContent = newAddress.split("-")?.[1]?.trim() || "Pincode";
  closeChangeAddressOverlay();
  alert("Address updated!");
}

function closeChangeAddressOverlay() {
  document.getElementById("changeAddressOverlay").classList.add("d-none");
}

function showSavedAddresses() {
  const list = document.getElementById("accountSavedAddresses");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
  if (saved.length === 0) {
    list.innerHTML = "<li class='text-muted small'>No saved addresses found.</li>";
  } else {
    list.innerHTML = saved.map(addr => `<li class='text-muted small'>${addr}</li>`).join("");
  }
}
</script>
<script>
    function populateDistricts() {
  const state = document.getElementById('custState').value;
  const districtSelect = document.getElementById('custDistrict');
        const districtsByState = {
  "Andhra Pradesh": ["Anantapur", "Chittoor", "East Godavari", "Guntur", "Krishna", "Kurnool", "Nellore", "Prakasam", "Srikakulam", "Visakhapatnam", "Vizianagaram", "West Godavari", "YSR Kadapa"],
  "Arunachal Pradesh": ["Tawang", "West Kameng", "East Kameng", "Papum Pare", "Kurung Kumey", "Kra Daadi", "Lower Subansiri", "Upper Subansiri", "West Siang", "East Siang", "Siang", "Upper Siang", "Lower Siang", "Lower Dibang Valley", "Dibang Valley", "Anjaw", "Lohit", "Namsai", "Changlang", "Tirap", "Longding"],
  "Assam": ["Baksa", "Barpeta", "Biswanath", "Bongaigaon", "Cachar", "Charaideo", "Chirang", "Darrang", "Dhemaji", "Dhubri", "Dibrugarh", "Goalpara", "Golaghat", "Hailakandi", "Hojai", "Jorhat", "Kamrup Metropolitan", "Kamrup", "Karbi Anglong", "Karimganj", "Kokrajhar", "Lakhimpur", "Majuli", "Morigaon", "Nagaon", "Nalbari", "Dima Hasao", "Sivasagar", "Sonitpur", "South Salmara-Mankachar", "Tinsukia", "Udalguri", "West Karbi Anglong"],
  "Bihar": ["Araria", "Arwal", "Aurangabad", "Banka", "Begusarai", "Bhagalpur", "Bhojpur", "Buxar", "Darbhanga", "East Champaran (Motihari)", "Gaya", "Gopalganj", "Jamui", "Jehanabad", "Kaimur (Bhabua)", "Katihar", "Khagaria", "Kishanganj", "Lakhisarai", "Madhepura", "Madhubani", "Munger (Monghyr)", "Muzaffarpur", "Nalanda", "Nawada", "Patna", "Purnia (Purnea)", "Rohtas", "Saharsa", "Samastipur", "Saran", "Sheikhpura", "Sheohar", "Sitamarhi", "Siwan", "Supaul", "Vaishali", "West Champaran"],
  "Chandigarh": ["Chandigarh"],
  "Chhattisgarh": ["Balod", "Baloda Bazar", "Balrampur", "Bastar", "Bemetara", "Bijapur", "Bilaspur", "Dantewada", "Dhamtari", "Durg", "Gariaband", "Janjgir-Champa", "Jashpur", "Kabirdham", "Kanker", "Kondagaon", "Korba", "Korea", "Mahasamund", "Mungeli", "Narayanpur", "Raigarh", "Raipur", "Rajnandgaon", "Sukma", "Surajpur", "Surguja"],
  "Delhi": ["Central Delhi", "East Delhi", "New Delhi", "North Delhi", "North East Delhi", "North West Delhi", "Shahdara", "South Delhi", "South East Delhi", "South West Delhi", "West Delhi"],
  "Dadra and Nagar Haveli and Daman and Diu": ["Dadra", "Nagar Haveli", "Daman", "Diu"],
  "Goa": ["North Goa", "South Goa"],
  "Gujarat": ["Ahmedabad", "Amreli", "Anand", "Aravalli", "Banaskantha", "Bharuch", "Bhavnagar", "Botad", "Chhota Udaipur", "Dahod", "Dang", "Devbhoomi Dwarka", "Gandhinagar", "Gir Somnath", "Jamnagar", "Junagadh", "Kheda", "Kutch", "Mahisagar", "Mehsana", "Morbi", "Narmada", "Navsari", "Panchmahal", "Patan", "Porbandar", "Rajkot", "Sabarkantha", "Surat", "Surendranagar", "Tapi", "Vadodara", "Valsad"],
  "Haryana": ["Ambala", "Bhiwani", "Charkhi Dadri", "Faridabad", "Fatehabad", "Gurugram", "Hisar", "Jhajjar", "Jind", "Kaithal", "Karnal", "Kurukshetra", "Mahendragarh", "Nuh", "Palwal", "Panchkula", "Panipat", "Rewari", "Rohtak", "Sirsa", "Sonipat", "Yamunanagar"],
  "Himachal Pradesh": ["Bilaspur", "Chamba", "Hamirpur", "Kangra", "Kinnaur", "Kullu", "Lahaul and Spiti", "Mandi", "Shimla", "Sirmaur", "Solan", "Una"],
  "Jammu and Kashmir": ["Anantnag", "Bandipora", "Baramulla", "Budgam", "Doda", "Ganderbal", "Jammu", "Kathua", "Kishtwar", "Kulgam", "Kupwara", "Poonch", "Pulwama", "Rajouri", "Ramban", "Reasi", "Samba", "Shopian", "Srinagar", "Udhampur"],
  "Jharkhand": ["Bokaro", "Chatra", "Deoghar", "Dhanbad", "Dumka", "East Singhbhum", "Garhwa", "Giridih", "Godda", "Gumla", "Hazaribagh", "Jamtara", "Khunti", "Koderma", "Latehar", "Lohardaga", "Pakur", "Palamu", "Ramgarh", "Ranchi", "Sahibganj", "Seraikela-Kharsawan", "Simdega", "West Singhbhum"],
  "Karnataka": ["Bagalkot", "Ballari", "Belagavi", "Bengaluru Rural", "Bengaluru Urban", "Bidar", "Chamarajanagar", "Chikkaballapur", "Chikkamagaluru", "Chitradurga", "Dakshina Kannada", "Davanagere", "Dharwad", "Gadag", "Hassan", "Haveri", "Kalaburagi", "Kodagu", "Kolar", "Koppal", "Mandya", "Mysuru", "Raichur", "Ramanagara", "Shivamogga", "Tumakuru", "Udupi", "Uttara Kannada", "Vijayapura", "Yadgir"],
  "Kerala": ["Alappuzha", "Ernakulam", "Idukki", "Kannur", "Kasaragod", "Kollam", "Kottayam", "Kozhikode", "Malappuram", "Palakkad", "Pathanamthitta", "Thiruvananthapuram", "Thrissur", "Wayanad"],
  "Ladakh": ["Kargil", "Leh"],
  "Lakshadweep": ["Agatti", "Amini", "Andrott", "Bitra", "Chetlat", "Kadmat", "Kalpeni", "Kavaratti", "Kiltan", "Minicoy"],
  "Maharashtra": ["Ahmednagar", "Akola", "Amravati", "Aurangabad", "Beed", "Bhandara", "Buldhana", "Chandrapur", "Dhule", "Gadchiroli", "Gondia", "Hingoli", "Jalgaon", "Jalna", "Kolhapur", "Latur", "Mumbai City", "Mumbai Suburban", "Nagpur", "Nanded", "Nandurbar", "Nashik", "Osmanabad", "Palghar", "Parbhani", "Pune", "Raigad", "Ratnagiri", "Sangli", "Satara", "Sindhudurg", "Solapur", "Thane", "Wardha", "Washim", "Yavatmal"],
  "Manipur": ["Bishnupur", "Chandel", "Churachandpur", "Imphal East", "Imphal West", "Jiribam", "Kakching", "Kamjong", "Kangpokpi", "Noney", "Pherzawl", "Senapati", "Tamenglong", "Tengnoupal", "Thoubal", "Ukhrul"],
  "Meghalaya": ["East Garo Hills", "East Jaintia Hills", "East Khasi Hills", "Eastern West Khasi Hills", "North Garo Hills", "Ri Bhoi", "South Garo Hills", "South West Garo Hills", "South West Khasi Hills", "West Garo Hills", "West Jaintia Hills", "West Khasi Hills"],
  "Mizoram": ["Aizawl", "Champhai", "Hnahthial", "Khawzawl", "Kolasib", "Lawngtlai", "Lunglei", "Mamit", "Saiha", "Saitual", "Serchhip"],
  "Nagaland": ["Chümoukedima", "Dimapur", "Kiphire", "Kohima", "Longleng", "Meluri", "Mokokchung", "Mon", "Niuland", "Noklak", "Peren", "Phek", "Shamator", "Tuensang", "Tseminyü", "Wokha", "Zünheboto"],
  "Odisha": ["Angul", "Balangir", "Balasore", "Bargarh", "Bhadrak", "Boudh", "Cuttack", "Deogarh", "Dhenkanal", "Gajapati", "Ganjam", "Jagatsinghpur", "Jajpur", "Jharsuguda", "Kalahandi", "Kandhamal", "Kendrapara", "Kendujhar", "Khordha", "Koraput", "Malkangiri", "Mayurbhanj", "Nabarangpur", "Nayagarh", "Nuapada", "Puri", "Rayagada", "Sambalpur", "Subarnapur", "Sundargarh"],
};

document.addEventListener("DOMContentLoaded", function () {
  const stateSelect = document.getElementById("custState");
  const districtSelect = document.getElementById("custDistrict");

  stateSelect.addEventListener("change", function () {
    const selectedState = this.value;
    districtSelect.innerHTML = '<option value="">Select District</option>';
    if (districtsByState[selectedState]) {
      districtsByState[selectedState].forEach(district => {
        const opt = document.createElement("option");
        opt.value = district;
        opt.textContent = district;
        districtSelect.appendChild(opt);
      });
    }
  });
});





function login() {
  const name = document.getElementById('custName').value.trim();
  const mobile = document.getElementById('custMobile').value.trim();
  const state = document.getElementById('custState').value;
  const district = document.getElementById('custDistrict').value;
  const city = document.getElementById('custCity').value.trim();
  const pincode = document.getElementById('custPincode').value.trim();
  const street = document.getElementById('custStreet').value.trim();

  if (!name || !mobile || !state || !district || !city || !pincode || !street) {
    alert("Please fill all fields.");
    return;
  }

  const address = `${street}, ${city}, ${district}, ${state} - ${pincode}`;
  const customer = { name, mobile, address };
  localStorage.setItem('delhFastCustomer', JSON.stringify(customer));

  // Show the shopping section, hide login
  document.getElementById('loginSection').classList.add('d-none');
  document.getElementById('grocerySection').classList.remove('d-none');

  // If there's an account name section, update it
  if (document.getElementById('accountName')) {
  }
  
}
    loadGroceryProducts();
    // Load products if needed
    function loadGroceryProducts() {
  const products = JSON.parse(localStorage.getItem('shoppingProducts')) || [];
  const container = document.getElementById('productContainer');
  container.innerHTML = "";

  const groceries = products.filter(p => p.category?.toLowerCase() === "grocery");

  groceries.forEach((p, index) => {
    const div = document.createElement("div");
    div.className = "col-6 col-md-4";
    div.innerHTML = `
      <div class="product-card text-center">
        ${p.imageUrl ? `<img src="${p.imageUrl}" class="img-fluid mb-2" style="max-height:100px;">` : ''}
        <h6>${p.name}</h6>
        <p><strong>₹${p.price}</strong></p>
        ${p.description ? `<p><em>${p.description}</em></p>` : ''}
        ${p.shopName ? `<p><small><strong>Shop:</strong> ${p.shopName}</small></p>` : ''}
        <button class="btn btn-sm btn-primary" onclick="addToCart(${index})">Add to Cart</button> <button class="btn btn-sm btn-warning mt-1" onclick="buyNow(this)">Buy Now</button>
      </div>
    `;
    container.appendChild(div);
  });
}



function editCustomer() {
  const name = prompt("Enter your name:", customer.name);
  const mobile = prompt("Enter your mobile number:", customer.mobile);
  const address = prompt("Enter your address:", customer.address);

  if (name && mobile && address) {
    customer = { name, mobile, address };
    localStorage.setItem('delhFastCustomer', JSON.stringify(customer));
    document.getElementById("accountName").textContent = customer.name;
    alert("Details updated.");
  } else {
    alert("All fieldsfunction loadCustomerData() {
  const saved = localStorage.getItem('delhFastCustomer');
  if (saved) {
    const customer = JSON.parse(saved);
    document.getElementById('loginSection').classList.add('d-none');
    document.getElementById('grocerySection').classList.remove('d-none');

    const accountNameEl = document.getElementById('accountName');
    if (accountNameEl) {
      accountNameEl.textContent = customer.name;
    }

    loadGroceryProducts();
    document.getElementById('userPincode').textContent = customer.address?.split('-')?.[1]?.trim() || 'Pincode';
    renderCart();
  }
  }are required.");
  }
}

function logout() {
  if (confirm("Are you sure you want to logout?")) {
    localStorage.removeItem("delhFastCustomer");
    localStorage.removeItem("delhFastCart");
    window.location.reload();
  }
}

function addToCart(index) {
  const products = JSON.parse(localStorage.getItem('shoppingProducts')) || [];
  const groceries = products.filter(p => p.category?.toLowerCase() === "grocery");
  const selectedProduct = { ...groceries[index], quantity: 1 };
  cart.push(selectedProduct);
  localStorage.setItem("delhFastCart", JSON.stringify(cart));
  alert(`${groceries[index].name} added to cart.`);
  renderCart();
}

function toggleCart() {
  const overlay = document.getElementById("fullCartOverlay");
  overlay.classList.toggle("d-none");

  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  document.getElementById("cartUserAddress").textContent = customer.address || "Address not found";

  renderFullCart();
}

function renderCart() {
  const cartItems = document.getElementById('cartItems');
  cartItems.innerHTML = "";

  if (cart.length === 0) {
    cartItems.innerHTML = "<p>Your cart is empty.</p>";
    return;
  }

  cart.forEach((item, i) => {
    cartItems.innerHTML += `
      <div class="cart-item">
        <div class="d-flex align-items-center">
          ${item.imageUrl ? `<img src="${item.imageUrl}" style="width:40px; height:40px; object-fit:cover; border-radius:5px; margin-right:10px;">` : ''}
          <span>${item.name}</span>
        </div>
        <div class="d-flex align-items-center">
          <select class="form-select form-select-sm me-2" style="width:auto;" onchange="updateQuantity(${i}, this.value)">
            ${[...Array(10).keys()].map(n => `<option value="${n+1}" ${item.quantity == n+1 ? "selected" : ""}>${n+1}</option>`).join('')}
          </select>
          <button class="btn btn-sm btn-danger" onclick="removeFromCart(${i})">X</button>
        </div>
      </div>
    `;
  });
}

function updateQuantity(index, qty) {
  cart[index].quantity = parseInt(qty);
  localStorage.setItem("delhFastCart", JSON.stringify(cart));
  renderCart();
}

function removeFromCart(index) {
  cart.splice(index, 1);
  localStorage.setItem("delhFastCart", JSON.stringify(cart));
  renderCart();
}

function submitCart() {
  if (cart.length === 0) {
    alert("No items in cart!");
    return;
  }

  const customerData = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");

  if (!customerData.name || !customerData.mobile || !customerData.address) {
    alert("Customer not logged in. Please log in again.");
    return;
  }

  const order = {
    name: customerData.name,
    mobile: customerData.mobile,
    address: customerData.address,
    products: cart,
    date: new Date().toLocaleDateString(),
    time: new Date().toLocaleTimeString()
  };

  const existingOrders = JSON.parse(localStorage.getItem("delhFastOrders") || "[]");
  existingOrders.push(order);
  localStorage.setItem("delhFastOrders", JSON.stringify(existingOrders));
  localStorage.removeItem("delhFastCart");

  alert("Order placed successfully!");
  window.location.reload();
}

function secureReset() {
  const pwd = prompt("Enter reset password:");
  if (pwd === "ABHINAV07") {
    localStorage.removeItem("shoppingProducts");
    alert("All products have been reset.");
    const container = document.getElementById("productContainer");
    if (container) {
      container.innerHTML = "<p class='text-center text-muted'>No products available.</p>";
    }
  } else {
    alert("Incorrect password.");
  }
}

function secureOrder() {
  const pwd = prompt("Enter order password:");
  if (pwd === "ORDER07") {
    window.location.href = "orders.html";
  } else {
    alert("Incorrect password.");
  }
}
// Seller flow
function handleSell() {
  document.getElementById('loginSection').classList.add('d-none');
  document.getElementById('grocerySection').classList.add('d-none');
  document.getElementById('sellerCodeSection').classList.remove('d-none');
}

function validateSellerAccess() {
  const code = document.getElementById('sellerCodeInput').value.trim();
  const pwd = document.getElementById('sellerPassInput').value.trim();
  if (code === 'SELLERDELHFAST' && pwd === 'SELLPASS') {
    const seller = JSON.parse(localStorage.getItem('sellerInfo'));
    if (seller) {
      showAddProductSection();
    } else {
      document.getElementById('sellerCodeSection').classList.add('d-none');
      document.getElementById('sellerLoginSection').classList.remove('d-none');
    }
  } else {
    alert('Incorrect seller code or password.');
  }
}

function sellerLogin() {
  const name = document.getElementById('sellerName').value.trim();
  const password = document.getElementById('sellerPassword').value.trim();
  const shop = document.getElementById('shopName').value.trim();
  const address = document.getElementById('shopAddress').value.trim();

  if (!name || !password || !shop || !address) {
    alert("Please fill in all fields");
    return;
  }

  const sellerInfo = { name, password, shop, address };
  localStorage.setItem("sellerInfo", JSON.stringify(sellerInfo));
  alert('Login successful!');
  showAddProductSection();
}

function showAddProductSection() {
  document.getElementById('sellerLoginSection').classList.add('d-none');
  document.getElementById('sellerCodeSection').classList.add('d-none');
  document.getElementById('addProductSection').classList.remove('d-none');
  showProducts();
}

function addProduct() {
  const seller = JSON.parse(localStorage.getItem("sellerInfo"));
  if (!seller) {
    alert("Seller not logged in");
    return;
  }
  const name = document.getElementById('productName').value.trim();
  const price = document.getElementById('productPrice').value.trim();
  const desc = document.getElementById('productDesc').value.trim();
  const imageInput = document.getElementById('productImage');
  if (!name || !price || !desc) {
    alert('Please fill all fields');
    return;
  }
  if (imageInput.files && imageInput.files[0]) {
    const reader = new FileReader();
    reader.onload = function(e) {
      const imageUrl = e.target.result;
      saveProduct(name, price, desc, imageUrl);
    }
    reader.readAsDataURL(imageInput.files[0]);
  } else {
    saveProduct(name, price, desc, '');
  }
}

function saveProduct(name, price, desc, imageUrl) {
  const seller = JSON.parse(localStorage.getItem("sellerInfo"));
  const products = JSON.parse(localStorage.getItem('shoppingProducts')) || [];
  const product = {
  name, price, description: desc, category: "Grocery", imageUrl,
  sellerName: seller.name, shopName: seller.shop, shopAddress: seller.address
};
  products.push(product);
  localStorage.setItem('shoppingProducts', JSON.stringify(products));
  alert('Product added successfully!');
  document.getElementById('productName').value = '';
  document.getElementById('productPrice').value = '';
  document.getElementById('productDesc').value = '';
  document.getElementById('productImage').value = '';
  showProducts();
}

function showProducts() {
  const products = JSON.parse(localStorage.getItem('shoppingProducts')) || [];
  const productList = document.getElementById('productList');
  productList.innerHTML = '<h3>Added Products</h3>';
  products.forEach(prod => {
    const div = document.createElement('div');
    div.className = 'border rounded p-2 mb-3';
    div.innerHTML = `
      <strong>Name:</strong> ${prod.name}<br>
      <strong>Price:</strong> ₹${prod.price}<br>
      <strong>Description:</strong> ${prod.description}<br>
      <strong>Seller:</strong> ${prod.sellerName}<br>
      <strong>Shop:</strong> ${prod.shopName}<br>
      <strong>Address:</strong> ${prod.shopAddress}<br>
      ${prod.imageUrl ? `<img src=\"${prod.imageUrl}\" alt=\"Product Image\">` : ''}
    `;
    productList.appendChild(div);
  });
}

window.onload = loadCustomerData;

let cart = JSON.parse(localStorage.getItem("delhFastCart") || "[]");


function searchProducts() {
  const query = document.getElementById("searchInput").value.toLowerCase();
  const all = document.querySelectorAll("#productContainer .product-card");
  all.forEach(card => {
    const name = card.querySelector("h6").textContent.toLowerCase();
    card.parentElement.style.display = name.includes(query) ? "block" : "none";
  });
}
function deleteAccount() {
  if (confirm("Are you sure you want to delete your account?")) {
    localStorage.removeItem("delhFastCustomer");
    localStorage.removeItem("delhFastCart");
    alert("Account deleted.");
    window.location.reload();
  }
}
      
function changeMobile() {
  const newMobile = prompt("Enter new mobile number:");
  if (newMobile && newMobile.match(/^[0-9]{10}$/)) {
    const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
    customer.mobile = newMobile;
    localStorage.setItem("delhFastCustomer", JSON.stringify(customer));
    alert("Mobile number updated.");
  } else {
    alert("Please enter a valid 10-digit mobile number.");
  }
}

function openChangeAddressOverlay() {
  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  if (customer.address) {
    document.getElementById("oldAddress").textContent = customer.address;
    document.getElementById("newAddress").value = customer.address;
    document.getElementById("changeAddressOverlay").classList.remove("d-none");

    // Load saved addresses
    const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
    const list = document.getElementById("savedAddressList");
    list.innerHTML = "";
    saved.forEach(addr => {
      const li = document.createElement("li");
      li.className = "list-group-item list-group-item-action";
      li.textContent = addr;
      li.onclick = () => {
        document.getElementById("newAddress").value = addr;
      };
      list.appendChild(li);
    });
  }
}

function saveNewAddress() {
  const newAddress = document.getElementById("newAddress").value.trim();
  if (!newAddress) {
    alert("Please enter a valid address.");
    return;
  }

  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");

  if (customer.address && customer.address !== newAddress && !saved.includes(customer.address)) {
    saved.push(customer.address);
    localStorage.setItem("delhFastSavedAddresses", JSON.stringify(saved));
  }

  customer.address = newAddress;
  localStorage.setItem("delhFastCustomer", JSON.stringify(customer));
  document.getElementById("cartUserAddress").textContent = newAddress;
  document.getElementById("userPincode").textContent = newAddress.split("-")?.[1]?.trim() || "Pincode";
  closeChangeAddressOverlay();
  alert("Address updated!");
}

function closeChangeAddressOverlay() {
  document.getElementById("changeAddressOverlay").classList.add("d-none");
}

function showSavedAddresses() {
  const list = document.getElementById("accountSavedAddresses");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
  if (saved.length === 0) {
    list.innerHTML = "<li class='text-muted small'>No saved addresses found.</li>";
  } else {
    list.innerHTML = saved.map(addr => `<li class='text-muted small'>${addr}</li>`).join("");
  }
}
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
function openChangeAddressOverlay() {
  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  if (customer.address) {
    document.getElementById("oldAddress").textContent = customer.address;
    document.getElementById("newAddress").value = customer.address;
    document.getElementById("changeAddressOverlay").classList.remove("d-none");

    // Load saved addresses
    const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
    const list = document.getElementById("savedAddressList");
    list.innerHTML = "";
    saved.forEach(addr => {
      const li = document.createElement("li");
      li.className = "list-group-item list-group-item-action";
      li.textContent = addr;
      li.onclick = () => {
        document.getElementById("newAddress").value = addr;
      };
      list.appendChild(li);
    });
  }
}

function saveNewAddress() {
  const newAddress = document.getElementById("newAddress").value.trim();
  if (!newAddress) {
    alert("Please enter a valid address.");
    return;
  }

  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");

  if (customer.address && customer.address !== newAddress && !saved.includes(customer.address)) {
    saved.push(customer.address);
    localStorage.setItem("delhFastSavedAddresses", JSON.stringify(saved));
  }

  customer.address = newAddress;
  localStorage.setItem("delhFastCustomer", JSON.stringify(customer));
  document.getElementById("cartUserAddress").textContent = newAddress;
  document.getElementById("userPincode").textContent = newAddress.split("-")?.[1]?.trim() || "Pincode";
  closeChangeAddressOverlay();
  alert("Address updated!");
}

function closeChangeAddressOverlay() {
  document.getElementById("changeAddressOverlay").classList.add("d-none");
}

function showSavedAddresses() {
  const list = document.getElementById("accountSavedAddresses");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
  if (saved.length === 0) {
    list.innerHTML = "<li class='text-muted small'>No saved addresses found.</li>";
  } else {
    list.innerHTML = saved.map(addr => `<li class='text-muted small'>${addr}</li>`).join("");
  }
}
</script>
<!-- 4-Step Checkout Overlay -->
<div class="position-fixed top-0 start-0 w-100 h-100 bg-white d-none" id="checkoutOverlay" style="z-index: 1060; overflow-y: auto;">
<div class="p-3">
<div id="checkoutStepProduct">
<div class="d-flex justify-content-between mb-4">
<span class="fw-bold text-primary">Product</span>
<span>Address</span>
<span>Offer</span>
<span>Payment</span>
</div>
<div class="mb-3" id="checkoutProducts"></div>
<div class="d-flex justify-content-between"><button class="btn btn-outline-secondary w-45" onclick="prevCheckoutStep()">Back</button><button class="btn btn-primary w-45" onclick="nextCheckoutStep()">DONE</button></div>
</div>
<div class="d-none" id="checkoutStepAddress">
<div class="d-flex justify-content-between mb-4">
<span>Product</span>
<span class="fw-bold text-primary">Address</span>
<span>Offer</span>
<span>Payment</span>
</div>
<h5>Shipping To:</h5>
<div class="mb-3" id="shippingInfo"></div>
<button class="btn btn-outline-secondary w-100 mb-3" onclick="selectOtherAddress()">Other</button>
<div class="d-none" id="otherAddresses"><p>Select from saved addresses:</p></div>
<div class="d-flex justify-content-between"><button class="btn btn-outline-secondary w-45" onclick="prevCheckoutStep()">Back</button><button class="btn btn-primary w-45" onclick="nextCheckoutStep()">DONE</button></div>
</div>
<div class="d-none" id="checkoutStepOffer">
<div class="d-flex justify-content-between mb-4">
<span>Product</span>
<span>Address</span>
<span class="fw-bold text-primary">Offer</span>
<span>Payment</span>
</div>
<p>Total Price: ₹<span id="offerTotalPrice">0</span></p>
<p>Delh-Points: <span id="delhPointsOffer">0</span>
<button class="btn btn-sm btn-outline-success" onclick="applyDelhPoints()">USE</button>
</p>
<div class="input-group my-2">
<input class="form-control" id="redeemInput" placeholder="Enter code" type="text"/>
<button class="btn btn-outline-primary" onclick="applyRedeem()">Claim</button>
</div>
<p class="mt-3 fw-bold">Price to Pay: ₹<span id="offerFinalPrice">0</span></p>
<button class="btn btn-primary w-100 mt-3" onclick="nextCheckoutStep()">DONE</button>
</div>
<div class="d-none" id="checkoutStepPayment">
<div class="d-flex justify-content-between mb-4">
<span>Product</span>
<span>Address</span>
<span>Offer</span>
<span class="fw-bold text-primary">Payment</span>
</div>
<p class="fw-bold">Price to Pay: ₹<span id="finalPayAmount">0</span></p>
<p class="mt-3">Choose the method to pay:</p>
<div class="form-check">
<input checked="" class="form-check-input" id="codOption" name="paymentMode" type="radio" value="COD"/>
<label class="form-check-label" for="codOption">Cash on Delivery</label>
</div>
<div class="form-check">
<input class="form-check-input" id="upiOption" name="paymentMode" type="radio" value="Online"/>
<label class="form-check-label" for="upiOption">Pay Online</label>
</div>
<button class="btn btn-success w-100 mt-4" onclick="placeFinalOrder()">ORDER</button>
</div>
</div>
</div>
<script>
function buyNow(button) {
  const card = button.closest('.product-card');
  const name = card.querySelector('h6').innerText;
  const price = parseFloat(card.querySelector('strong').innerText.replace('₹',''));
  const img = card.querySelector('img')?.src || '';
  
  const selectedProduct = { name, price, img, qty: 1 };

  document.getElementById("checkoutProducts").innerHTML = `
    <div class="card mb-2 p-2">
      <div class="d-flex align-items-center">
        ${img ? `<img src="${img}" style="height:80px; width:80px; object-fit:cover; margin-right:10px;">` : ""}
        <div>
          <h6>${name}</h6>
          <p>₹${price}</p>
        </div>
      </div>
    </div>
  `;
  
  localStorage.setItem("checkoutTemp", JSON.stringify(selectedProduct));
  document.getElementById("offerTotalPrice").textContent = price;
  document.getElementById("offerFinalPrice").textContent = price;
  document.getElementById("finalPayAmount").textContent = price;

  document.getElementById("checkoutOverlay").classList.remove("d-none");
  ["checkoutStepProduct", "checkoutStepAddress", "checkoutStepOffer", "checkoutStepPayment"]
    .forEach((id, i) => {
      document.getElementById(id).classList.toggle("d-none", i !== 0);
    });
}

function openChangeAddressOverlay() {
  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  if (customer.address) {
    document.getElementById("oldAddress").textContent = customer.address;
    document.getElementById("newAddress").value = customer.address;
    document.getElementById("changeAddressOverlay").classList.remove("d-none");

    // Load saved addresses
    const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
    const list = document.getElementById("savedAddressList");
    list.innerHTML = "";
    saved.forEach(addr => {
      const li = document.createElement("li");
      li.className = "list-group-item list-group-item-action";
      li.textContent = addr;
      li.onclick = () => {
        document.getElementById("newAddress").value = addr;
      };
      list.appendChild(li);
    });
  }
}

function saveNewAddress() {
  const newAddress = document.getElementById("newAddress").value.trim();
  if (!newAddress) {
    alert("Please enter a valid address.");
    return;
  }

  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");

  if (customer.address && customer.address !== newAddress && !saved.includes(customer.address)) {
    saved.push(customer.address);
    localStorage.setItem("delhFastSavedAddresses", JSON.stringify(saved));
  }

  customer.address = newAddress;
  localStorage.setItem("delhFastCustomer", JSON.stringify(customer));
  document.getElementById("cartUserAddress").textContent = newAddress;
  document.getElementById("userPincode").textContent = newAddress.split("-")?.[1]?.trim() || "Pincode";
  closeChangeAddressOverlay();
  alert("Address updated!");
}

function closeChangeAddressOverlay() {
  document.getElementById("changeAddressOverlay").classList.add("d-none");
}

function showSavedAddresses() {
  const list = document.getElementById("accountSavedAddresses");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
  if (saved.length === 0) {
    list.innerHTML = "<li class='text-muted small'>No saved addresses found.</li>";
  } else {
    list.innerHTML = saved.map(addr => `<li class='text-muted small'>${addr}</li>`).join("");
  }
}
</script>
<script>
let currentStep = 0;
const checkoutSteps = [
  "checkoutStepProduct",
  "checkoutStepAddress",
  "checkoutStepOffer",
  "checkoutStepPayment"
];

function nextCheckoutStep() {
  if (currentStep < checkoutSteps.length - 1) {
    document.getElementById(checkoutSteps[currentStep]).classList.add("d-none");
    currentStep++;
    document.getElementById(checkoutSteps[currentStep]).classList.remove("d-none");
  }
}

function openChangeAddressOverlay() {
  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  if (customer.address) {
    document.getElementById("oldAddress").textContent = customer.address;
    document.getElementById("newAddress").value = customer.address;
    document.getElementById("changeAddressOverlay").classList.remove("d-none");

    // Load saved addresses
    const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
    const list = document.getElementById("savedAddressList");
    list.innerHTML = "";
    saved.forEach(addr => {
      const li = document.createElement("li");
      li.className = "list-group-item list-group-item-action";
      li.textContent = addr;
      li.onclick = () => {
        document.getElementById("newAddress").value = addr;
      };
      list.appendChild(li);
    });
  }
}

function saveNewAddress() {
  const newAddress = document.getElementById("newAddress").value.trim();
  if (!newAddress) {
    alert("Please enter a valid address.");
    return;
  }

  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");

  if (customer.address && customer.address !== newAddress && !saved.includes(customer.address)) {
    saved.push(customer.address);
    localStorage.setItem("delhFastSavedAddresses", JSON.stringify(saved));
  }

  customer.address = newAddress;
  localStorage.setItem("delhFastCustomer", JSON.stringify(customer));
  document.getElementById("cartUserAddress").textContent = newAddress;
  document.getElementById("userPincode").textContent = newAddress.split("-")?.[1]?.trim() || "Pincode";
  closeChangeAddressOverlay();
  alert("Address updated!");
}

function closeChangeAddressOverlay() {
  document.getElementById("changeAddressOverlay").classList.add("d-none");
}

function showSavedAddresses() {
  const list = document.getElementById("accountSavedAddresses");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
  if (saved.length === 0) {
    list.innerHTML = "<li class='text-muted small'>No saved addresses found.</li>";
  } else {
    list.innerHTML = saved.map(addr => `<li class='text-muted small'>${addr}</li>`).join("");
  }
}
</script>


<script>
let currentStep = 0;
const checkoutSteps = [
  "checkoutStepProduct",
  "checkoutStepAddress",
  "checkoutStepOffer",
  "checkoutStepPayment"
];

function nextCheckoutStep() {
  if (currentStep < checkoutSteps.length - 1) {
    document.getElementById(checkoutSteps[currentStep]).classList.add("d-none");
    currentStep++;
    document.getElementById(checkoutSteps[currentStep]).classList.remove("d-none");
  }
}

function prevCheckoutStep() {
  if (currentStep > 0) {
    document.getElementById(checkoutSteps[currentStep]).classList.add("d-none");
    currentStep--;
    document.getElementById(checkoutSteps[currentStep]).classList.remove("d-none");
  }
}


function placeFinalOrder() {
  const temp = JSON.parse(localStorage.getItem("checkoutTemp") || "{}");
  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");

  if (!customer.name || !customer.mobile || !customer.address) {
    alert("Customer info missing.");
    return;
  }

  const order = {
    name: customer.name,
    mobile: customer.mobile,
    address: customer.address,
    products: [temp],
    date: new Date().toLocaleDateString(),
    time: new Date().toLocaleTimeString()
  };

  const existingOrders = JSON.parse(localStorage.getItem("delhFastOrders") || "[]");
  existingOrders.push(order);
  localStorage.setItem("delhFastOrders", JSON.stringify(existingOrders));
  localStorage.removeItem("checkoutTemp");

  alert("Order placed successfully!");
  document.getElementById("checkoutOverlay").classList.add("d-none");
}


  const order = {
    name: customer.name,
    mobile: customer.mobile,
    address: customer.address,
    products: [temp],
    date: new Date().toLocaleDateString(),
    time: new Date().toLocaleTimeString()
  };

  const existingOrders = JSON.parse(localStorage.getItem("delhFastOrders") || "[]");
  existingOrders.push(order);
  localStorage.setItem("delhFastOrders", JSON.stringify(existingOrders));
  localStorage.removeItem("checkoutTemp");

  alert("Order placed successfully!");
  window.location.href = "orders.html";
}


function openChangeAddressOverlay() {
  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  if (customer.address) {
    document.getElementById("oldAddress").textContent = customer.address;
    document.getElementById("newAddress").value = customer.address;
    document.getElementById("changeAddressOverlay").classList.remove("d-none");

    // Load saved addresses
    const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
    const list = document.getElementById("savedAddressList");
    list.innerHTML = "";
    saved.forEach(addr => {
      const li = document.createElement("li");
      li.className = "list-group-item list-group-item-action";
      li.textContent = addr;
      li.onclick = () => {
        document.getElementById("newAddress").value = addr;
      };
      list.appendChild(li);
    });
  }
}

function saveNewAddress() {
  const newAddress = document.getElementById("newAddress").value.trim();
  if (!newAddress) {
    alert("Please enter a valid address.");
    return;
  }

  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");

  if (customer.address && customer.address !== newAddress && !saved.includes(customer.address)) {
    saved.push(customer.address);
    localStorage.setItem("delhFastSavedAddresses", JSON.stringify(saved));
  }

  customer.address = newAddress;
  localStorage.setItem("delhFastCustomer", JSON.stringify(customer));
  document.getElementById("cartUserAddress").textContent = newAddress;
  document.getElementById("userPincode").textContent = newAddress.split("-")?.[1]?.trim() || "Pincode";
  closeChangeAddressOverlay();
  alert("Address updated!");
}

function closeChangeAddressOverlay() {
  document.getElementById("changeAddressOverlay").classList.add("d-none");
}

function showSavedAddresses() {
  const list = document.getElementById("accountSavedAddresses");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
  if (saved.length === 0) {
    list.innerHTML = "<li class='text-muted small'>No saved addresses found.</li>";
  } else {
    list.innerHTML = saved.map(addr => `<li class='text-muted small'>${addr}</li>`).join("");
  }
}
</script>



<script>
function promptAppEdit() {
  const pwd = prompt("Enter APP-EDIT password:");
  if (pwd === "NOTHING07") {
    const list = document.getElementById("appSettingsList");
    list.innerHTML = `
      <li><a href="#" onclick="secureReset()">+ Reset</a></li>
<li><a href="#" onclick="secureOrder()">+ Orders</a></li>
<li><a href="#" onclick="handleSell()">+ Sell</a></li>
    `;
  } else {
    alert("Incorrect APP-EDIT password.");
  }
}

function closeFullCart() {
  document.getElementById("fullCartOverlay").classList.add("d-none");
}


function openChangeAddressOverlay() {
  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  if (customer.address) {
    document.getElementById("oldAddress").textContent = customer.address;
    document.getElementById("newAddress").value = customer.address;
    document.getElementById("changeAddressOverlay").classList.remove("d-none");

    // Load saved addresses
    const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
    const list = document.getElementById("savedAddressList");
    list.innerHTML = "";
    saved.forEach(addr => {
      const li = document.createElement("li");
      li.className = "list-group-item list-group-item-action";
      li.textContent = addr;
      li.onclick = () => {
        document.getElementById("newAddress").value = addr;
      };
      list.appendChild(li);
    });
  }
}

function saveNewAddress() {
  const newAddress = document.getElementById("newAddress").value.trim();
  if (!newAddress) {
    alert("Please enter a valid address.");
    return;
  }

  const customer = JSON.parse(localStorage.getItem("delhFastCustomer") || "{}");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");

  if (customer.address && customer.address !== newAddress && !saved.includes(customer.address)) {
    saved.push(customer.address);
    localStorage.setItem("delhFastSavedAddresses", JSON.stringify(saved));
  }

  customer.address = newAddress;
  localStorage.setItem("delhFastCustomer", JSON.stringify(customer));
  document.getElementById("cartUserAddress").textContent = newAddress;
  document.getElementById("userPincode").textContent = newAddress.split("-")?.[1]?.trim() || "Pincode";
  closeChangeAddressOverlay();
  alert("Address updated!");
}

function closeChangeAddressOverlay() {
  document.getElementById("changeAddressOverlay").classList.add("d-none");
}

function showSavedAddresses() {
  const list = document.getElementById("accountSavedAddresses");
  const saved = JSON.parse(localStorage.getItem("delhFastSavedAddresses") || "[]");
  if (saved.length === 0) {
    list.innerHTML = "<li class='text-muted small'>No saved addresses found.</li>";
  } else {
    list.innerHTML = saved.map(addr => `<li class='text-muted small'>${addr}</li>`).join("");
  }
}
</script>

<!-- Address Change Overlay -->
<div class="position-fixed top-0 start-0 w-100 h-100 bg-white d-none" id="changeAddressOverlay" style="z-index: 1060; overflow-y: auto;">
  <div class="p-3">
    <h4 class="text-center">Change Delivery Address</h4>
    <p>Old Address:</p>
    <p id="oldAddress" class="text-muted"></p>
    <textarea id="newAddress" class="form-control mb-3" placeholder="Enter new address"></textarea>
    <button class="btn btn-primary w-100 mb-2" onclick="saveNewAddress()">Save</button>
    <button class="btn btn-secondary w-100" onclick="closeChangeAddressOverlay()">Cancel</button>
    <div class="mt-4">
      <h5>Saved Addresses</h5>
      <ul id="savedAddressList" class="list-group"></ul>
    </div>
  </div>
</div>
</body>
</html>
